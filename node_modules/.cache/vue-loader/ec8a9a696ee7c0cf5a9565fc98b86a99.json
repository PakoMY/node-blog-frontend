{"remainingRequest":"/Users/pako/work/workspace/node-blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pako/work/workspace/node-blog/blog/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/pako/work/workspace/node-blog/blog/src/views/Login.vue","mtime":1613354097955},{"path":"/Users/pako/work/workspace/node-blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pako/work/workspace/node-blog/blog/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/pako/work/workspace/node-blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pako/work/workspace/node-blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb29raWUgZnJvbSAnanMtY29va2llJwpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxvYWRpbmc6ZmFsc2UsCiAgICAgICAgICAgIHN0YXR1czoxLAogICAgICAgICAgICBsb2dpbkZvcm06ewogICAgICAgICAgICAgICAgdXNlcm5hbWU6JycsCiAgICAgICAgICAgICAgICBwYXNzd29yZDonJwogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2dpblJ1bGVzOnsKICAgICAgICAgICAgICAgIHVzZXJuYW1lOlsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6LSm5Y+3JywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6WwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVnRm9ybTp7CiAgICAgICAgICAgICAgICB1c2VybmFtZTonJywKICAgICAgICAgICAgICAgIHBhc3N3b3JkOicnLAogICAgICAgICAgICAgICAgbmlja25hbWU6JycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVnUnVsZXM6ewogICAgICAgICAgICAgICAgdXNlcm5hbWU6WwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXotKblj7cnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBuaWNrbmFtZTogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmmLXnp7AnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgc2lnbkluKCkgewogICAgICAgICAgICB0aGlzLiRyZWZzWydsb2dpbkZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvYXBpL3VzZXIvbG9naW4nLHRoaXMubG9naW5Gb3JtKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvb2tpZS5zZXQoJ3Rva2VuJyxyZXN1bHQudG9rZW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRUb2tlbicscmVzdWx0LnRva2VuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdJc1NpZ25JbicsMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6J2hvbWUnfSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBzaWduVXAoKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnNbJ3JlZ0Zvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJ2h0dHA6Ly8xMjcuMC4wLjEvYXBpL3VzZXIvcmVnaXN0ZXInLHRoaXMucmVnRm9ybSkKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRheGlvcy5wb3N0KCcvYXBpL3VzZXIvcmVnaXN0ZXInLHRoaXMucmVnRm9ybSkKICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHRvU2lnblVwKCl7CiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gMgogICAgICAgIH0sCiAgICAgICAgdG9TaWduSW4oKSB7CiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gMQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"sign_box\">\n        <div class=\"signIn\" v-if=\"status==1\">\n            <el-form :model=\"loginForm\" :rules=\"loginRules\" ref=\"loginForm\" label-width=\"0px\" key=\"login\">\n                <el-form-item prop=\"username\">\n                    <el-input v-model=\"loginForm.username\" placeholder=\"请输入账号\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input type=\"password\" v-model=\"loginForm.password\" placeholder=\"请输入密码\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button class=\"signBtn\" type=\"primary\" @click=\"signIn\">登录</el-button>\n                </el-form-item>\n            </el-form>\n            <span class=\"signText\" @click=\"toSignUp\">注册新账号</span>\n        </div>\n        <div class=\"signUp\" v-else>\n            <el-form :model=\"regForm\" :rules=\"regRules\" ref=\"regForm\" label-width=\"0px\" key=\"register\">\n                <el-form-item prop=\"username\">\n                    <el-input v-model=\"regForm.username\" placeholder=\"请输入账号\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input type=\"password\" v-model=\"regForm.password\" placeholder=\"请输入密码\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"nickname\">\n                    <el-input v-model=\"regForm.nickname\" placeholder=\"请输入昵称\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button class=\"signBtn\" type=\"primary\" @click=\"signUp\">注册</el-button>\n                </el-form-item>\n            </el-form>\n            <span class=\"signText\" @click=\"toSignIn\">返回登录</span>\n        </div>\n        <div v-loading.fullscreen.lock=\"loading\"></div>\n    </div>\n</template>\n\n<script>\n    import Cookie from 'js-cookie'\n    export default {\n        data() {\n            return {\n                loading:false,\n                status:1,\n                loginForm:{\n                    username:'',\n                    password:''\n                },\n                loginRules:{\n                    username:[\n                        { required: true, message: '请输入账号', trigger: 'blur' },\n                    ],\n                    password:[\n                        { required: true, message: '请输入密码', trigger: 'blur' },\n                    ]\n                },\n                regForm:{\n                    username:'',\n                    password:'',\n                    nickname:''\n                },\n                regRules:{\n                    username:[\n                        { required: true, message: '请输入账号', trigger: 'blur' },\n                    ],\n                    password: [\n                        { required: true, message: '请输入密码', trigger: 'blur' },\n                    ],\n                    nickname: [\n                        { required: true, message: '请输入昵称', trigger: 'blur' },\n                    ],\n                }\n            }\n        },\n        methods:{\n            signIn() {\n                this.$refs['loginForm'].validate((valid) => {\n                    if (valid) {\n                        this.loading = true\n                        this.$axios.post('/api/user/login',this.loginForm)\n                            .then(res => {\n                                let result = res.data\n                                if(result.code === 0) {\n                                    Cookie.set('token',result.token)\n                                    this.$store.commit('setToken',result.token)\n                                    this.$store.commit('changIsSignIn',1)\n                                    setTimeout(() => {\n                                        this.loading = false\n                                        this.$router.push({name:'home'}) \n                                    }, 1500);\n                                }\n                            })\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            signUp() {\n                this.$refs['regForm'].validate((valid) => {\n                    if (valid) {\n                                                this.$axios.post('http://127.0.0.1/api/user/register',this.regForm)\n                        // this.$axios.post('/api/user/register',this.regForm)\n                            .then(res => {\n                                console.log(res)\n                            })\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            toSignUp(){\n                this.status = 2\n            },\n            toSignIn() {\n                this.status = 1\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n.sign_box {\n    width: 300px;\n    margin: 200px auto 0;\n    text-align: center;\n    .signText {\n        color: #3B78DD;\n        cursor: pointer;\n        &:hover{\n            color: #1760D7;\n        }\n    }\n}\n.signBtn {\n    width: 100%;\n    font-size: 18px;\n}\n</style>"]}]}