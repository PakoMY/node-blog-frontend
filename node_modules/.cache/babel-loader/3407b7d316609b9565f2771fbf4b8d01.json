{"remainingRequest":"/Users/pako/work/workspace/blog/node_modules/babel-loader/lib/index.js!/Users/pako/work/workspace/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/pako/work/workspace/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pako/work/workspace/blog/src/components/Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/pako/work/workspace/blog/src/components/Comment.vue","mtime":1613314595023},{"path":"/Users/pako/work/workspace/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pako/work/workspace/blog/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/pako/work/workspace/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pako/work/workspace/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyaW5mbzoge30sCiAgICAgIHN1Ym1pdFRleHQ6ICcnLAogICAgICBjb21tZW50czogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNTaWduSW46IGZ1bmN0aW9uIGlzU2lnbkluKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuaXNTaWduSW47CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRVc2VySW5mbzogZnVuY3Rpb24gZ2V0VXNlckluZm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRheGlvcy5nZXQoJy9hcGkvdXNlci9pbmZvJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5kYXRhOwoKICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT09IDApIHsKICAgICAgICAgIF90aGlzLnVzZXJpbmZvID0gcmVzdWx0LmRhdGE7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCiAgICBwdWJsaWNDb21tZW50OiBmdW5jdGlvbiBwdWJsaWNDb21tZW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9hcGkvY29tbWVudC9wdWJsaWMnLCB7CiAgICAgICAgYXJ0aWNsZV9pZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgIGNvbnRlbnQ6IHRoaXMuc3VibWl0VGV4dAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMyLnN1Ym1pdFRleHQgPSAnJzsKCiAgICAgICAgICBfdGhpczIuZ2V0Q29tbWVudExpc3QoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldENvbW1lbnRMaXN0OiBmdW5jdGlvbiBnZXRDb21tZW50TGlzdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLiRheGlvcy5nZXQoJy9hcGkvY29tbWVudC9saXN0JywgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgYXJ0aWNsZV9pZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMzLmNvbW1lbnRzID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlckluZm8oKTsKICAgIHRoaXMuZ2V0Q29tbWVudExpc3QoKTsKICB9Cn07"},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA;AACA;AAHA,GARA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AAAA;;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,GAAA,GAAA,CAAA,IAAA;;AACA,YAAA,MAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,MAAA,CAAA,IAAA;AACA;AACA,OALA,EAKA,KALA,CAKA,UAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,OAPA;AAQA,KAVA;AAWA,IAAA,aAXA,2BAWA;AAAA;;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,qBAAA,EAAA;AACA,QAAA,UAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,QAAA,OAAA,EAAA,KAAA;AAFA,OAAA,EAGA,IAHA,CAGA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,UAAA,GAAA,EAAA;;AACA,UAAA,MAAA,CAAA,cAAA;AACA;AACA,OATA,EASA,KATA,CASA,UAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,OAXA;AAYA,KAxBA;AAyBA,IAAA,cAzBA,4BAyBA;AAAA;;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,mBAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,UAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AADA;AADA,OAAA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,OATA,EASA,KATA,CASA,UAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,OAXA;AAYA;AAtCA,GAbA;AAqDA,EAAA,OArDA,qBAqDA;AACA,SAAA,WAAA;AACA,SAAA,cAAA;AACA;AAxDA,CAAA","sourcesContent":["<template>\n    <div class=\"comment-box\">\n        <div v-if=\"isSignIn===0\" class=\"signInText\">登录留言吧</div>\n        <div v-else class=\"input-box\">\n            <div class=\"input-top\">\n                <div class=\"img\">\n                    <img class=\"avatar\" :src=\"userinfo.head_img\" alt=\"\">\n                    <p class=\"username\">{{userinfo.nickname}}</p>\n                </div>\n                <div class=\"text\">\n                    <textarea class=\"comment-content\" v-model=\"submitText\"></textarea>\n                </div>\n            </div>\n            <div class=\"input-bottom\">\n                <a href=\"javascript:void(0)\" class=\"submit\" @click=\"publicComment\">发表评论</a>\n            </div>\n        </div>\n        <div class=\"all_comment\">\n            <p class=\"title\">全部评论<span class=\"total\">{{comments.length}}</span>条</p>\n            <div class=\"comment-list\">\n                <div class=\"comment-item\" v-for=\"item in comments\" :key=\"item.id\">\n                    <div class=\"item_l\">\n                        <img class=\"avatar\" :src=\"item.head_img\" alt=\"\">\n                        <p class=\"username\">{{item.nickname}}</p>\n                    </div>\n                    <div class=\"item_r\">\n                        <div class=\"comment-content\">\n                            <div class=\"comment_text\">{{item.cm_content}}</div>\n                            <div class=\"comment_time\">\n                                <span class=\"date\">{{item.create_time}}</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n                userinfo:{},\n                submitText:'',\n                comments:[]\n            }\n        },\n        computed: {\n            isSignIn() {\n                return this.$store.state.isSignIn\n            }\n        },\n        methods:{\n            getUserInfo() {\n                this.$axios.get('/api/user/info').then((res)=>{\n                    let result = res.data\n                    if(result.code === 0){\n                        this.userinfo = result.data\n                    }\n                }).catch(e=>{\n                    console.log(e)\n                })\n            },\n            publicComment() {\n                this.$axios.post('/api/comment/public',{\n                    article_id:this.$route.params.id,\n                    content:this.submitText\n                }).then((res)=>{\n                    console.log(res)\n                    if(res.data.code === 0){\n                        this.submitText = ''\n                        this.getCommentList()\n                    }\n                }).catch(e=>{\n                    console.log(e)\n                })\n            },\n            getCommentList() {\n                this.$axios.get('/api/comment/list',{\n                    params:{\n                        article_id:this.$route.params.id\n                    }     \n                }).then((res)=>{\n                    console.log(res)\n                    if(res.data.code === 0){\n                        this.comments = res.data.data\n                    }\n                }).catch(e=>{\n                    console.log(e)\n                })\n            }\n        },\n        created() {\n            this.getUserInfo()\n            this.getCommentList()\n        },\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n.comment-box {\n    padding: 50px 30px;\n    -webkit-box-shadow: 0 0px 3px rgba(0, 0, 0, 0.157), 0 0px 3px rgba(0, 0, 0, 0.227);\n    box-shadow: 0 0px 3px rgba(0, 0, 0, 0.157), 0 0px 3px rgba(0, 0, 0, 0.227);\n    background: #fafafa;\n    .signInText {\n        text-align: center;\n        color: #3b99fc;\n        font-size: 18px;\n        cursor: pointer;\n    }\n}\n.input-box {\n    .input-top {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        .img {\n            width: 100px;\n            text-align: center;\n            .avatar{\n                display: inline-block;\n                width: 60px;\n                height: 60px;\n                border-radius: 50%;\n                border: 1px solid #000;\n            }\n            .username {\n                color: #3b99fc;\n                cursor: pointer;\n                word-break: break-all;\n                margin-top: 10px;\n            }\n        }\n        .text {\n            -webkit-box-flex: 1;\n            -ms-flex: 1;\n            flex: 1;\n            textarea {\n                width: 98%;\n                margin-left: 2%;\n                min-height: 90px;\n                font-size: 14px;\n                border: 1px solid #ddd;\n                border-radius: 6px;\n                padding: 20px;\n                box-sizing: border-box;\n            }\n        }\n    }\n    .input-bottom {\n        margin-top: 20px;\n        overflow: hidden;\n        .submit {\n            float:right;\n            width: 100px;\n            height: 50px;\n            line-height: 50px;\n            background: rgba(0, 0, 0, 0.2);\n            text-align: center;\n            border-radius: 6px;\n            color: #fff;\n            &:hover {\n                background: rgba(0, 129, 255, 0.7);\n            }\n        }\n    }\n}\n.all_comment {\n    border-top: 1px solid #eee;\n    padding: 30px 0;\n    margin: 30px 0 0 0;\n    .title {\n        margin-bottom: 50px;\n        font-size: 20px;\n        font-weight: bold;\n        border-left: 4px solid #3b99fc;\n        padding-left: 20px;\n    }\n    .comment-list {\n        .comment-item {\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            padding: 20px 0;\n            border-bottom: 1px solid #eee;\n            .item_l {\n                width: 100px;\n                text-align: center;\n                .avatar{\n                        display: inline-block;\n                        width: 60px;\n                        height: 60px;\n                        border-radius: 50%;\n                        border: 1px solid #000;\n                        margin-bottom: 20px;\n                }\n                .username {\n                        color: #3b99fc;\n                        cursor: pointer;\n                        word-break: break-all;\n                }\n            }\n            .item_r {\n                flex: 1;\n                .comment-content {\n                    width: 98%;\n                    margin-left: 2%;\n                    padding: 10px;\n                    -webkit-box-sizing: border-box;\n                    box-sizing: border-box;\n                    font-size: 14px;\n                    color: #666;\n                    .comment_text {\n                        min-height: 70px;\n                    }\n                    .comment_time {\n                        text-align: right;\n                        padding: 10px 0;\n                        font-size: 12px;\n                    }\n                }\n                \n            }\n        }\n    }\n}\n</style>"],"sourceRoot":"src/components"}]}