(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14f75c67"],{"90ab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{staticClass:"nickname",model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://127.0.0.1:3000/api/user/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"head_img"}},[a("img",{staticClass:"avatar",attrs:{src:null!=e.imageUrl?e.imageUrl:e.imgDefault}})]),a("p",{staticClass:"tips"},[e._v("tips:请上传2M以内JPG/PNG格式的图片，比例最好1:1")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),a("el-button",{on:{click:e.signOut}},[e._v("退出登录")])],1)],1)],1)])},i=[],s=a("cf05"),o=a.n(s),r=a("a78e"),c=a.n(r),l={data:function(){return{form:{nickname:this.nickname},imageUrl:null,imgDefault:o.a}},methods:{save:function(){var e=this;this.$axios.post("/api/user/updateUser",{nickname:this.form.nickname,head_img:this.imageUrl}).then((function(t){console.log(t),0===t.data.code&&(e.$message({message:"更新成功",type:"success"}),setTimeout((function(){location.reload()}),1500))})).catch((function(e){console.log(e)}))},handleAvatarSuccess:function(e){this.imageUrl=e.data},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getUserInfo:function(){var e=this;this.$axios.get("/api/user/info").then((function(t){var a=t.data;0===a.code&&(e.form.nickname=a.data.nickname,""===a.data.head_img||null===a.data.head_img?e.imageUrl=null:e.imageUrl=a.data.head_img)})).catch((function(e){console.log(e)}))},signOut:function(){c.a.remove("token"),this.$store.commit("setToken",""),this.$store.commit("changIsSignIn",0),this.$router.push({name:"home"})}},created:function(){this.getUserInfo()}},m=l,u=(a("b784"),a("2877")),f=Object(u["a"])(m,n,i,!1,null,"05742532",null);t["default"]=f.exports},b784:function(e,t,a){"use strict";a("ba3d")},ba3d:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"}}]);
//# sourceMappingURL=chunk-14f75c67.6b3032a4.js.map